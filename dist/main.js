!function(i){var e={};function t(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return i[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=i,t.c=e,t.d=function(i,e,s){t.o(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:s})},t.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,e){if(1&e&&(i=t(i)),8&e)return i;if(4&e&&"object"==typeof i&&i&&i.__esModule)return i;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&e&&"string"!=typeof i)for(var r in i)t.d(s,r,function(e){return i[e]}.bind(null,r));return s},t.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(e,"a",e),e},t.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},t.p="",t(t.s=3)}([function(i){i.exports=JSON.parse('{"x":0,"y":0,"width":15,"height":20,"type":"player","group":"characters","name":"Bunny","jumpImpulse":221,"maxSpeed":3,"maxJumpingSpeed":9,"isJumping":false,"isJumpTriggered":false,"isFalling":true,"accelerationModifier":6,"brakingModifier":6,"velocityX":0,"velocityY":0,"isMovingLeft":false,"isMovingRight":false,"friction":0.09,"isSprinting":false,"isDucking":false,"isKeepDucking":false,"isStuck":false,"isFacingLeft":false,"spriteMap":{},"frameWidth":37,"frameHeight":32,"frames":{"idle":["player-idle-1","player-idle-2","player-idle-3","player-idle-4","player-idle-5","player-idle-6","player-idle-7","player-idle-8","player-idle-9"],"skip":["player-skip-1","player-skip-2","player-skip-3","player-skip-4","player-skip-5","player-skip-6","player-skip-7","player-skip-8"],"jump":["player-jump-1","player-jump-2","player-jump-3","player-jump-4"],"fall":["player-fall-1","player-fall-2","player-fall-3","player-fall-4"],"duck":["player-duck-1","player-duck-2","player-duck-3","player-duck-4"]}}')},function(i){i.exports=JSON.parse('{"frames":{"player-climb-1":{"frame":{"x":0,"y":0,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-climb-2":{"frame":{"x":0,"y":32,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-climb-3":{"frame":{"x":37,"y":0,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-duck-1":{"frame":{"x":37,"y":32,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-duck-2":{"frame":{"x":0,"y":64,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-duck-3":{"frame":{"x":37,"y":64,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-duck-4":{"frame":{"x":74,"y":0,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-fall-1":{"frame":{"x":74,"y":32,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-fall-2":{"frame":{"x":74,"y":64,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-fall-3":{"frame":{"x":0,"y":96,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-fall-4":{"frame":{"x":37,"y":96,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-hurt-1":{"frame":{"x":74,"y":96,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-hurt-2":{"frame":{"x":111,"y":0,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-1":{"frame":{"x":111,"y":32,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-2":{"frame":{"x":111,"y":64,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-3":{"frame":{"x":111,"y":96,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-4":{"frame":{"x":0,"y":128,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-5":{"frame":{"x":37,"y":128,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-6":{"frame":{"x":74,"y":128,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-7":{"frame":{"x":111,"y":128,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-8":{"frame":{"x":148,"y":0,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-idle-9":{"frame":{"x":148,"y":32,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-jump-1":{"frame":{"x":148,"y":64,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-jump-2":{"frame":{"x":148,"y":96,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-jump-3":{"frame":{"x":148,"y":128,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-jump-4":{"frame":{"x":0,"y":160,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-skip-1":{"frame":{"x":37,"y":160,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-skip-2":{"frame":{"x":74,"y":160,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-skip-3":{"frame":{"x":111,"y":160,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-skip-4":{"frame":{"x":148,"y":160,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-skip-5":{"frame":{"x":185,"y":0,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-skip-6":{"frame":{"x":185,"y":32,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-skip-7":{"frame":{"x":185,"y":64,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-skip-8":{"frame":{"x":185,"y":96,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}},"player-climb-4":{"frame":{"x":0,"y":32,"w":37,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":37,"h":32},"sourceSize":{"w":37,"h":32},"pivot":{"x":0.5,"y":0.5}}},"meta":{"app":"http://free-tex-packer.com","version":"0.6.5","image":"player.png","format":"RGBA8888","size":{"w":222,"h":192},"scale":1}}')},function(i){i.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"format":"json","target":"map.json"}},"height":40,"infinite":false,"layers":[{"color":"#00ffff","draworder":"topdown","id":12,"name":"characters","objects":[{"height":20,"id":52,"name":"player","rotation":0,"type":"player","visible":true,"width":15,"x":28.5,"y":269.5}],"opacity":1,"type":"objectgroup","visible":false,"x":0,"y":0},{"color":"#7b0000","draworder":"topdown","id":9,"name":"collisions","objects":[{"height":0.25,"id":21,"name":"","rotation":0,"type":"","visible":true,"width":0.25,"x":241,"y":318},{"height":8,"id":23,"name":"top","rotation":0,"type":"top","visible":true,"width":216,"x":104,"y":312},{"height":8,"id":24,"name":"top-left","rotation":0,"type":"top-left","visible":true,"width":8,"x":56,"y":296},{"height":8,"id":25,"name":"full","rotation":0,"type":"full","visible":true,"width":24,"x":64,"y":288},{"height":8,"id":26,"name":"top-left","rotation":0,"type":"top-left","visible":true,"width":8,"x":48,"y":304},{"height":24,"id":28,"name":"full","rotation":0,"type":"full","visible":true,"width":72,"x":104,"y":240},{"height":8,"id":31,"name":"top-right","rotation":0,"type":"top-right","visible":true,"width":8,"x":88,"y":296},{"height":8,"id":32,"name":"top-right","rotation":0,"type":"top-right","visible":true,"width":8,"x":96,"y":304},{"height":16,"id":34,"name":"full","rotation":0,"type":"full","visible":true,"width":16,"x":240,"y":280},{"height":8,"id":35,"name":"top","rotation":0,"type":"top","visible":true,"width":48,"x":0,"y":312},{"height":304,"id":41,"name":"right","rotation":0,"type":"right","visible":true,"width":8,"x":0,"y":8},{"height":304,"id":42,"name":"left","rotation":0,"type":"left","visible":true,"width":8,"x":312,"y":8},{"height":8,"id":43,"name":"bottom","rotation":0,"type":"bottom ","visible":true,"width":320,"x":0,"y":0},{"height":8,"id":44,"name":"top","rotation":0,"type":"top","visible":true,"width":16,"x":8,"y":272},{"height":8,"id":45,"name":"top","rotation":0,"type":"top","visible":true,"width":16,"x":8,"y":192},{"height":8,"id":46,"name":"top","rotation":0,"type":"top","visible":true,"width":23.9987,"x":8,"y":232},{"height":8,"id":47,"name":"top","rotation":-0.100437,"type":"top","visible":true,"width":24,"x":112,"y":192},{"height":16,"id":48,"name":"full","rotation":-0.100437,"type":"full","visible":true,"width":128,"x":168,"y":160},{"height":16,"id":53,"name":"full","rotation":0,"type":"full","visible":true,"width":104,"x":32,"y":104},{"height":8,"id":54,"name":"full","rotation":0,"type":"full","visible":true,"width":16,"x":120,"y":96},{"height":8,"id":56,"name":"full","rotation":0,"type":"full","visible":true,"width":16,"x":32,"y":96},{"height":8,"id":57,"name":"top","rotation":0,"type":"top","visible":true,"width":8,"x":8,"y":144}],"opacity":1,"type":"objectgroup","visible":true,"x":0,"y":0},{"data":[130,130,107,107,107,107,107,107,107,107,107,107,107,107,107,107,107,108,131,108,108,108,108,108,108,108,108,108,108,108,108,108,131,131,131,131,108,108,108,108,130,131,130,107,130,130,130,130,130,130,130,130,130,130,130,130,107,108,131,131,108,107,107,108,131,131,107,107,107,107,107,107,108,131,108,107,108,131,131,131,130,131,107,107,107,107,107,107,107,107,107,107,107,107,107,107,107,107,108,107,108,107,107,107,107,107,130,130,130,130,107,108,108,131,107,108,108,130,131,131,130,131,130,130,130,130,130,130,130,130,130,130,130,107,108,108,108,108,108,107,108,107,130,130,130,107,107,107,108,108,108,131,131,131,107,108,107,108,130,131,130,131,107,107,108,108,108,108,108,108,108,108,108,108,108,131,131,131,131,107,107,130,107,107,107,130,130,130,131,131,131,130,131,108,107,108,107,108,130,131,130,131,130,107,107,107,107,107,107,107,107,107,107,107,108,108,108,108,108,108,108,130,130,130,130,130,131,131,107,130,130,131,108,108,107,108,107,108,130,131,130,131,130,130,130,107,108,108,108,108,108,108,108,108,108,131,131,131,131,131,131,130,131,107,130,130,107,107,130,130,131,108,108,131,107,108,107,108,130,131,130,131,130,107,107,107,107,108,131,131,131,131,131,107,107,107,107,107,108,108,130,130,131,107,107,107,130,130,130,131,131,131,131,108,107,108,107,108,130,131,130,131,130,107,130,107,108,108,108,108,108,108,108,108,108,108,108,108,108,108,107,130,107,130,130,130,107,107,107,130,130,130,131,131,108,108,107,108,130,131,130,131,109,107,107,107,108,131,131,131,131,131,131,131,131,131,131,135,131,131,109,131,107,130,131,131,109,110,111,112,131,108,108,108,108,108,107,108,109,110,130,131,130,130,107,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,130,131,107,107,130,107,132,133,134,135,131,131,131,131,131,108,107,108,132,133,130,107,130,107,130,131,131,131,131,109,131,131,131,131,131,131,131,131,131,131,130,107,107,130,107,107,107,107,107,107,130,130,130,130,131,131,108,108,130,131,130,107,130,107,135,107,107,107,107,107,107,109,110,111,112,130,130,131,107,130,130,107,130,109,110,111,112,130,130,130,131,108,108,108,130,131,109,110,111,112,130,107,107,107,130,130,130,130,130,130,130,132,133,134,135,131,110,111,112,107,107,107,130,132,133,134,135,131,131,131,131,131,131,131,108,130,132,133,134,135,130,107,130,130,130,130,130,130,130,131,108,108,108,108,130,132,133,134,135,107,130,130,130,130,130,131,131,131,131,131,130,130,109,131,131,130,131,108,130,131,130,130,130,130,131,131,131,131,131,131,131,131,108,108,131,131,107,108,108,108,130,109,108,108,131,131,131,108,108,108,108,108,131,107,108,130,131,108,130,131,130,130,131,130,130,109,130,130,130,130,130,135,131,131,108,108,108,108,108,131,130,131,108,131,107,130,131,131,131,131,131,131,131,107,107,130,131,108,130,131,130,130,109,130,131,108,108,108,108,130,131,131,131,131,131,131,131,131,131,107,130,131,131,130,130,130,130,130,130,131,108,108,108,107,130,130,131,108,130,131,131,130,131,107,107,107,107,107,107,107,107,107,109,110,111,112,131,108,108,108,107,130,107,107,109,110,111,112,130,131,131,131,131,108,130,131,109,108,130,131,131,130,130,130,130,130,130,130,130,130,130,130,131,131,110,111,112,131,131,131,130,130,130,130,132,133,134,135,130,130,109,110,111,112,130,131,131,131,130,131,107,107,130,130,130,130,130,130,130,130,130,130,132,132,133,134,135,107,130,131,130,131,107,107,107,107,108,107,130,130,132,133,134,135,107,108,108,108,131,131,130,130,130,131,131,131,109,131,131,131,108,108,108,108,109,131,131,130,109,131,130,107,107,107,108,107,107,130,130,130,130,130,130,130,107,107,107,107,108,131,131,108,109,108,108,108,108,108,108,108,108,109,108,131,131,107,130,131,130,131,107,130,130,107,107,108,108,108,108,108,108,108,108,108,130,107,108,107,108,131,131,131,131,131,131,131,131,131,131,131,131,131,108,108,107,130,130,109,130,130,130,130,131,107,130,131,131,131,131,131,131,131,131,131,108,108,109,110,111,112,130,130,130,130,109,130,130,130,109,107,107,107,107,107,130,130,131,108,108,108,130,131,107,108,107,108,108,107,108,108,108,108,130,131,131,131,132,133,134,135,130,131,110,130,130,130,130,130,130,130,130,130,130,130,130,131,131,131,131,135,130,131,107,107,109,108,131,108,107,107,107,107,107,130,131,130,131,108,108,131,130,130,131,107,107,107,130,130,130,131,107,108,108,108,108,108,108,108,108,108,130,131,107,107,107,107,107,109,110,111,112,130,130,130,131,130,131,131,108,131,107,130,130,130,108,130,135,131,108,108,108,135,131,131,131,131,135,131,131,131,130,131,107,130,130,130,130,132,133,134,135,107,107,130,131,130,130,131,108,131,130,109,131,131,131,131,131,131,131,131,131,107,107,135,107,107,107,130,131,131,130,131,130,130,130,130,130,130,130,130,130,130,130,130,130,130,130,131,108,131,130,131,132,133,134,135,136,137,130,131,132,133,134,108,136,137,130,131,132,133,134,135,136,137,130,131,132,133,134,135,136,137,130,131,132,133,134,135,136,137,153,154,155,156,157,158,159,160,153,154,155,156,157,158,159,160,153,154,155,156,157,158,159,160,153,154,155,156,157,158,159,160,153,154,155,156,157,158,159,160,176,177,178,179,180,181,182,183,176,177,178,179,180,181,182,183,176,177,178,179,180,181,182,183,176,177,178,179,180,181,182,183,176,177,178,179,180,181,182,183,180,181,182,183,180,181,182,183,180,181,182,183,180,181,182,180,180,180,180,180,180,180,181,182,183,182,183,183,183,183,159,180,180,180,180,181,182,183,183,160,180,181,182,183,180,181,182,183,180,181,182,183,180,181,182,180,181,182,183,179,180,181,182,183,183,180,181,182,183,183,183,183,183,183,183,183,183,183,159,160,159,159,160,160,160,160,160,160,180,181,182,183,183,159,180,180,181,182,183,180,181,182,183,183,159,180,180,181,182,183,159,159,159,159,159,159,159,160,160,160,182,159,159,159,159,159,159,159,159,180,181,182,183,183,183,183,183,182,183,183,183,183,183,159,182,182,180,181,182,183,182,182,182,182,182,182,159,160,183,183,176,182,182,182,182,182,182,182,182,182,183,160,160,181,180,181,182,183,183,183,182,183,159,160,159,160,160,160,160,160,160,160,160,160,160,160,160,160,182,183,180,179,179,179,179,179,180,180,182,183,183,183,183,160,160,179,159,159,159,159,182,182,159,160,182,183,183,183,183,183,183,183,183,183,183,183,183,183,182,183,180,180,180,180,180,180,180,180,179,180,179,182,183,183,183,179,182,182,182,159,159,159,159,159,159,159,159,159,159,159,159,159,159,159,159,159,159,159,159,182,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,182,183,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182],"height":40,"id":2,"name":"background","opacity":1,"type":"tilelayer","visible":false,"width":40,"x":0,"y":0},{"data":[94,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,95,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,109,0,0,0,0,0,109,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,0,0,0,0,0,109,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,109,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,25,27,0,0,0,0,0,0,0,0,0,25,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,48,117,26,26,26,26,26,26,26,26,26,118,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,71,72,72,72,72,72,72,72,72,72,72,72,73,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,79,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,71,72,72,72,72,72,72,72,72,72,72,72,72,72,72,73,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,79,80,0,0,0,0,0,0,0,0,0,0,0,121,122,123,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,144,145,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,167,168,169,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,147,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,79,80,80,0,0,0,0,0,0,0,0,0,0,0,171,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,26,26,26,26,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,48,163,49,165,141,140,165,163,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,71,72,72,72,72,72,72,72,73,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,79,80,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,27,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,0,25,26,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,71,73,0,0,0,0,0,0,0,48,50,0,0,0,0,0,0,25,118,165,117,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,50,0,0,0,0,0,25,118,163,165,141,117,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,117,26,26,26,26,26,118,164,164,141,164,165,117,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,118],"height":40,"id":1,"name":"middle","opacity":1,"type":"tilelayer","visible":false,"width":40,"x":0,"y":0},{"data":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,30,30,30,30,30,30,31,29,30,30,30,29,30,29,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,77,77,75,75,75,76,77,77,77,75,77,75,75,77,75,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,29,0,30,35,33,34,29,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,30,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":40,"id":5,"name":"front","opacity":1,"type":"tilelayer","visible":false,"width":40,"x":0,"y":0}],"nextlayerid":13,"nextobjectid":58,"orientation":"orthogonal","renderorder":"left-up","tiledversion":"1.3.4","tileheight":8,"tilesets":[{"columns":23,"firstgid":1,"image":"../../../../tilesheets/tileset.png","imageheight":72,"imagewidth":184,"margin":0,"name":"tileset","spacing":0,"tilecount":207,"tileheight":8,"tilewidth":8}],"tilewidth":8,"type":"map","version":1.2,"width":40}')},function(i,e,t){"use strict";function s(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}t.r(e);var r=class{constructor(){s(this,"isDown",void 0),s(this,"isActive",void 0),this.isDown=!1,this.isActive=!1}getInput(i){this.isDown!==i&&(this.isActive=i),this.isDown=i}};function a(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function o(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var h=class{constructor(i,e){o(this,"image",void 0),o(this,"tileSize",void 0),o(this,"columns",void 0),o(this,"flippedImage",void 0),this.image=new Image,this.tileSize=i,this.columns=e}loadAsset(i){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Promise.all([this.loadImage(i),this.flipImage(i)]):this.loadImage(i)}loadImage(i){return new Promise((e,t)=>{this.image.addEventListener("load",()=>e()),this.image.addEventListener("error",i=>t(i)),this.image.src=i})}flipImage(i){return new Promise((e,t)=>{var s=document.createElement("canvas").getContext("2d"),r=new Image;r.src=i,r.addEventListener("error",i=>t(i)),r.addEventListener("load",()=>{s.canvas.width=r.width,s.canvas.height=r.height,s.save(),s.scale(-1,1),s.drawImage(r,-r.width,0,r.width,r.height),s.restore(),this.flippedImage=s.canvas,e()},{once:!0})})}};function l(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function n(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var d="\n  attribute vec4 aPosition;\n\n  uniform vec2 uResolution;\n\n  void main() {\n    // convert the position from pixels to clipspace\n    vec2 clipSpace = ((aPosition.xy / uResolution) * 2.0) - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n  }\n  ",c="\n    precision mediump float;\n\n    uniform vec4 uColor;\n\n    void main() {\n      gl_FragColor = uColor;\n    }\n  ";function p(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function m(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function u(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var g=class{constructor(i,e,t,s,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";u(this,"name",void 0),u(this,"x",void 0),u(this,"y",void 0),u(this,"xOld",void 0),u(this,"yOld",void 0),u(this,"width",void 0),u(this,"height",void 0),u(this,"type",void 0),u(this,"group",void 0),u(this,"isColliding",void 0),this.group=r,this.type=a,this.name=o,this.x=i,this.y=e,this.xOld=i,this.yOld=e,this.isColliding=!1,this.width=t,this.height=s}getTop(){return this.y}getRight(){return this.x+this.width}getLeft(){return this.x}getBottom(){return this.y+this.height}getOldTop(){return this.yOld}getOldRight(){return this.xOld+this.width}getOldLeft(){return this.xOld}getOldBottom(){return this.yOld+this.height}setTop(i){this.y=i}setRight(i){this.x=i-this.width}setLeft(i){this.x=i}setBottom(i){this.y=i-this.height}setOldTop(i){this.yOld=i}setOldRight(i){this.xOld=i-this.width}setOldLeft(i){this.xOld=i}setOldBottom(i){this.yOld=i-this.height}};function f(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function y(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}class v extends g{constructor(i,e){super(i.x,i.y,i.width,i.height,i.group,i.type),y(this,"jumpImpulse",void 0),y(this,"maxSpeed",void 0),y(this,"isJumping",void 0),y(this,"velocityX",void 0),y(this,"velocityY",void 0),y(this,"isMovingLeft",void 0),y(this,"isMovingRight",void 0),y(this,"accelerationModifier",void 0),y(this,"brakingModifier",void 0),y(this,"isFalling",void 0),y(this,"velocityYModifier",void 0),y(this,"isJumpTriggered",void 0),y(this,"maxJumpingSpeed",void 0),y(this,"friction",void 0),y(this,"animator",void 0),y(this,"isFacingLeft",void 0),y(this,"isSprinting",void 0),y(this,"isDucking",void 0),y(this,"isKeepDucking",void 0),y(this,"isStuck",void 0),y(this,"defaults",void 0),y(this,"duckingTimer",void 0),this.defaults=i,this.jumpImpulse=i.jumpImpulse,this.maxSpeed=i.maxSpeed,this.maxJumpingSpeed=i.maxJumpingSpeed,this.isJumping=i.isJumping,this.isJumpTriggered=i.isJumpTriggered,this.isFalling=i.isFalling,this.accelerationModifier=i.accelerationModifier,this.brakingModifier=i.brakingModifier,this.velocityX=i.velocityX,this.velocityY=i.velocityY,this.isMovingLeft=i.isMovingLeft,this.isMovingRight=i.isMovingRight,this.friction=i.friction,this.isSprinting=i.isSprinting,this.isDucking=i.isDucking,this.isKeepDucking=i.isKeepDucking,this.isStuck=i.isStuck,this.isFacingLeft=i.isFacingLeft,this.setAnimationDefaults(i,e)}setAnimationDefaults(i,e){this.animator=new class{constructor(i,e,t,s){f(this,"spriteMap",void 0),f(this,"frameWidth",void 0),f(this,"frameHeight",void 0),f(this,"frames",void 0),f(this,"count",void 0),f(this,"delay",void 0),f(this,"mode",void 0),f(this,"activeFrameSet",void 0),f(this,"frameIndex",void 0),f(this,"frameValue",void 0),f(this,"flippedSpriteMap",void 0),this.spriteMap=i,this.flippedSpriteMap=i,this.frameWidth=e,this.frameHeight=t,this.frames=s,this.count=0,this.delay=0,this.activeFrameSet="",this.mode="pause",this.frameIndex=0,this.frameValue="",this.getXFlippedCoords()}getXFlippedCoords(){this.flippedSpriteMap=JSON.parse(JSON.stringify(this.spriteMap)),Object.keys(this.flippedSpriteMap.frames).map(i=>{this.flippedSpriteMap.frames[i].frame.x=this.flippedSpriteMap.meta.size.w-this.flippedSpriteMap.frames[i].frame.x-this.flippedSpriteMap.frames[i].frame.w})}animate(){switch(this.mode){case"loop":this.loop()}}changeFrameset(i,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!this.frames[i]||this.activeFrameSet===i&&this.delay===t||(this.count=0,this.delay=t,this.mode=e,this.activeFrameSet=i,this.frameIndex=s,this.frameValue=this.frames[i][this.frameIndex])}loop(){for(this.count+=1;this.count>this.delay;)this.count-=this.delay,this.frameIndex=this.frameIndex<this.frames[this.activeFrameSet].length-1?this.frameIndex+1:0,this.frameValue=this.frames[this.activeFrameSet][this.frameIndex]}}(e,i.frameWidth,i.frameHeight,i.frames)}updateAnimation(){!this.isMovingLeft&&!this.isMovingRight||this.isJumping||this.isFalling?this.isFalling?this.animator.changeFrameset("fall","loop",4):this.isJumping?this.animator.changeFrameset("jump","loop",4):this.isDucking?this.animator.changeFrameset("duck","loop",4):this.animator.changeFrameset("idle","loop",4):this.isSprinting?this.animator.changeFrameset("skip","loop",1.33):this.animator.changeFrameset("skip","loop",2),this.animator.animate()}startDucking(){this.isJumping||this.isFalling||(this.isDucking||(this.y+=5,this.duckingTimer=setTimeout(()=>{this.isKeepDucking=!0},1e3)),this.isDucking=!0,this.isSprinting=!1,this.isMovingLeft=!1,this.isMovingRight=!1,this.brakingModifier=24,this.height=15)}stopDucking(){this.isDucking=!1,this.isKeepDucking=!1,clearTimeout(this.duckingTimer),this.brakingModifier=6,this.height=20,this.y-=5}startSprinting(){this.isJumping||this.isDucking||(this.isSprinting=!0,this.maxSpeed=5,this.accelerationModifier=10)}stopSprinting(){this.isSprinting=!1,this.maxSpeed=3,this.accelerationModifier=6}startMovingLeft(){this.isMovingRight||this.isDucking||(this.isFacingLeft=!0,this.isMovingLeft=!0)}stopMovingLeft(){this.isMovingLeft=!1}startMovingRight(){this.isMovingLeft||this.isDucking||(this.isFacingLeft=!1,this.isMovingRight=!0)}stopMovingRight(){this.isMovingRight=!1}jump(i){this.isStuck||(this.isJumpTriggered=i)}update(i){this.adjustHorizontalMovement(),this.adjustVerticalMovement(i),this.updateAnimation(),!this.isColliding&&this.velocityY>0&&(this.isFalling=!0)}adjustVerticalMovement(i){var e,t,s;this.velocityYModifier=i,this.yOld=this.y,!this.isJumpTriggered||this.isJumping||this.isFalling||(this.velocityYModifier=this.velocityYModifier-this.jumpImpulse,this.isJumping=!0),this.velocityY=(e=this.velocityY+this.friction*this.velocityYModifier,t=-this.maxJumpingSpeed,s=this.maxJumpingSpeed,Math.max(t,Math.min(s,e))),this.y+=this.velocityY+this.friction*this.velocityY}adjustHorizontalMovement(){this.xOld=this.x,this.isMovingLeft?(this.velocityX>-this.maxSpeed&&(this.velocityX-=this.maxSpeed/this.accelerationModifier),this.velocityX<-this.maxSpeed&&(this.velocityX+=this.maxSpeed/this.accelerationModifier)):this.isMovingRight?(this.velocityX<this.maxSpeed&&(this.velocityX+=this.maxSpeed/this.accelerationModifier),this.velocityX>this.maxSpeed&&(this.velocityX-=this.maxSpeed/this.accelerationModifier)):this.isMovingLeft||this.isMovingRight||(this.velocityX<0&&(this.velocityX+=this.maxSpeed/this.brakingModifier,this.velocityX>0&&(this.velocityX=0)),this.velocityX>0&&(this.velocityX-=this.maxSpeed/this.brakingModifier,this.velocityX<0&&(this.velocityX=0))),this.x+=this.velocityX}}var w=t(1),x=t(0);function S(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function b(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var M=t(2),k=t.p+"images/tileset.png",z=t.p+"images/player.png";function L(i,e,t,s,r,a,o){try{var h=i[a](o),l=h.value}catch(i){return void t(i)}h.done?e(l):Promise.resolve(l).then(s,r)}function F(i){return function(){var e=this,t=arguments;return new Promise((function(s,r){var a=i.apply(e,t);function o(i){L(a,s,r,o,h,"next",i)}function h(i){L(a,s,r,o,h,"throw",i)}o(void 0)}))}}window.addEventListener("DOMContentLoaded",F((function*(){var i=i=>{t.handleKeyEvent(i.type,i.keyCode)},e=()=>{s.resize(document.documentElement.clientWidth,document.documentElement.clientHeight,9/16),s.render(u,o.world.width,o.world.height)},t=new class{constructor(){a(this,"left",void 0),a(this,"right",void 0),a(this,"up",void 0),a(this,"shift",void 0),a(this,"down",void 0),this.left=new r,this.right=new r,this.up=new r,this.shift=new r,this.down=new r}handleKeyEvent(i,e){var t="keydown"===i;switch(e){case 37:this.left.getInput(t);break;case 38:this.up.getInput(t);break;case 39:this.right.getInput(t);break;case 16:this.shift.getInput(t);break;case 40:this.down.getInput(t)}}},s=new class{constructor(i,e,t){m(this,"buffer",void 0),m(this,"context",void 0),m(this,"mapTileset",void 0),m(this,"playerSprite",void 0),m(this,"camera",void 0),m(this,"renderer",void 0),m(this,"bufferGL",void 0),this.buffer=document.createElement("canvas").getContext("2d"),this.context=i.getContext("2d"),this.bufferGL=document.createElement("canvas").getContext("webgl"),this.mapTileset=new h(8,23),this.playerSprite=new h(8,23),this.camera=new class{constructor(i,e){l(this,"x",void 0),l(this,"y",void 0),l(this,"width",void 0),l(this,"height",void 0),l(this,"yDiff",void 0),l(this,"velocity",void 0),l(this,"velocityModifier",void 0),l(this,"maxVelocity",void 0),this.x=0,this.y=0,this.width=i,this.height=e,this.yDiff=0,this.velocity=0,this.velocityModifier=4,this.maxVelocity=this.height/2.5}adjustCamera(i,e,t){var s;i.isDucking?(s=i.y-(i.defaults.height-i.height)+this.velocity,i.isKeepDucking&&this.velocity<=this.maxVelocity&&(this.velocity+=this.velocityModifier)):(this.velocity&&(this.velocity-=this.velocityModifier),s=i.y+this.velocity);var r=i.x+i.defaults.width/2,a=s+i.defaults.height/2,o=r-this.width/2,h=a-this.height/2;o<0&&(o=0),r+this.width/2>e&&(o=e-this.width),h<0&&(h=0),a+this.height/2>t&&(h=t-this.height),this.x=o,this.y=h}}(e,t),this.renderer=new class{constructor(i){p(this,"gl",void 0),p(this,"shader",void 0),p(this,"aPosition",void 0),p(this,"uResolution",void 0),p(this,"uColor",void 0),this.gl=i,this.shader=new class{constructor(i,e,t){n(this,"vertexShader",void 0),n(this,"fragmentShader",void 0),n(this,"program",void 0),this.vertexShader=this.compileShader(i,i.VERTEX_SHADER,e),this.fragmentShader=this.compileShader(i,i.FRAGMENT_SHADER,t),this.program=this.compileProgram(i)}compileShader(i,e,t){var s=i.createShader(e);if(i.shaderSource(s,t),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error(i.getShaderInfoLog(s));return s}compileProgram(i){var e=i.createProgram();if(i.attachShader(e,this.vertexShader),i.attachShader(e,this.fragmentShader),i.linkProgram(e),!i.getProgramParameter(e,i.LINK_STATUS))throw i.deleteProgram(e),e=null,new Error(i.getProgramInfoLog(e));return e}}(this.gl,d,c),this.aPosition=this.gl.getAttribLocation(this.shader.program,"aPosition"),this.uResolution=this.gl.getUniformLocation(this.shader.program,"uResolution"),this.uColor=this.gl.getUniformLocation(this.shader.program,"uColor"),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.gl.createBuffer())}drawRect(i,e){this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(i),this.gl.DYNAMIC_DRAW),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.useProgram(this.shader.program),this.gl.enableVertexAttribArray(this.aPosition),this.gl.vertexAttribPointer(this.aPosition,2,this.gl.FLOAT,!1,0,0),this.gl.uniform2f(this.uResolution,this.gl.canvas.width,this.gl.canvas.height),this.gl.uniform4f(this.uColor,e[0]/255,e[1]/255,e[2]/255,e[3]),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}clear(){this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}}(this.bufferGL)}drawObject(i,e,t,s,r,a,o){this.buffer.drawImage(i,e,t,a,o,Math.round(s),Math.round(r),a,o)}drawCollisionDebugMap(i){var e={top:[255,0,0,.5],"top-left":[255,100,0,.5],"top-right":[255,0,136,.5],left:[0,181,204,.5],right:[145,61,136,.5],bottom:[255,255,0,.5],"bottom-left":[255,255,204,.5],"bottom-right":[255,255,136,.5],full:[200,200,200,.5]};this.renderer.clear();for(var t=0;t<i.length;t+=1)for(var s=0;s<i[t].length;s+=1)"collision"===i[t][s].type&&this.renderer.drawRect([i[t][s].x,i[t][s].y,i[t][s].x+i[t][s].width,i[t][s].y,i[t][s].x,i[t][s].y+i[t][s].height,i[t][s].x,i[t][s].y+i[t][s].height,i[t][s].x+i[t][s].width,i[t][s].y,i[t][s].x+i[t][s].width,i[t][s].y+i[t][s].height],e[i[t][s].name])}drawMap(i,e){for(var t=0;t<i.length;t+=1)if(i[t]){var s=i[t],r=t,a=Math.floor(s/this.mapTileset.columns),o=s%this.mapTileset.columns-1,h=Math.floor(r/e),l=r%e,n=this.mapTileset.tileSize*o,d=this.mapTileset.tileSize*a,c=this.mapTileset.tileSize*l,p=this.mapTileset.tileSize*h,m=2*this.mapTileset.tileSize;p>this.camera.y+this.camera.height+m||p<this.camera.y-m||c>this.camera.x+this.camera.width+m||c<this.camera.x-m||this.buffer.drawImage(this.mapTileset.image,n,d,this.mapTileset.tileSize,this.mapTileset.tileSize,c,p,this.mapTileset.tileSize,this.mapTileset.tileSize)}}render(i,e,t){this.camera.adjustCamera(i,e,t),this.context.drawImage(this.buffer.canvas,this.camera.x,this.camera.y,this.camera.width,this.camera.height,0,0,this.context.canvas.width,this.context.canvas.height),window.SHOW_COLLISIONS&&this.context.drawImage(this.bufferGL.canvas,this.camera.x,this.camera.y,this.camera.width,this.camera.height,0,0,this.context.canvas.width,this.context.canvas.height)}resize(i,e,t){e/i>t?(this.context.canvas.height=i*t,this.context.canvas.width=i,this.bufferGL.canvas.height=i*t,this.bufferGL.canvas.width=i):(this.context.canvas.height=e,this.context.canvas.width=e/t,this.bufferGL.canvas.height=e,this.bufferGL.canvas.width=e/t),this.context.imageSmoothingEnabled=!1}}(document.getElementById("game"),256,144),o=new class{constructor(i){var e,t,s;s=void 0,(t="world")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,this.world=new class{constructor(i){S(this,"gravity",void 0),S(this,"height",void 0),S(this,"width",void 0),S(this,"backgroundMap",void 0),S(this,"middleMap",void 0),S(this,"frontMap",void 0),S(this,"collisionDebugMap",void 0),S(this,"columns",void 0),S(this,"rows",void 0),S(this,"tileSize",void 0),S(this,"collider",void 0),S(this,"map",void 0),S(this,"rawLayers",void 0),S(this,"collisions",void 0),S(this,"characters",void 0),this.gravity=10,this.columns=40,this.rows=40,this.tileSize=8,this.width=this.columns*this.tileSize,this.height=this.rows*this.tileSize,this.processMap(i),this.height=this.tileSize*this.rows,this.width=this.tileSize*this.columns,this.collider=new class{processNarrowPhase(i,e){switch(i.isStuck=!1,e.type){case"top":this.collideFromTop(i,e);break;case"right":this.collideFromRight(i,e);break;case"bottom":this.collideFromBottom(i,e);break;case"left":this.collideFromLeft(i,e);break;case"top-left":if(this.collideFromTop(i,e))return;this.collideFromLeft(i,e);break;case"top-right":if(this.collideFromTop(i,e))return;this.collideFromRight(i,e);break;case"bottom-right":if(this.collideFromRight(i,e))return;this.collideFromBottom(i,e);break;case"bottom-left":if(this.collideFromLeft(i,e))return;this.collideFromBottom(i,e);break;case"full":if(this.collideFromTop(i,e))return;if(this.collideFromLeft(i,e))return;if(this.collideFromRight(i,e))return;if(this.collideFromBottom(i,e))return;i.isStuck=!0}}processBroadPhase(i){return this.bruteForce(i)}bruteForce(i){var e=i.length,t=[];if(e>1)for(var s=0;s<e;s+=1)for(var r=i[s],a=s+1;a<e;a+=1){var o=i[a];this.broadPhaseComparator(r,o)?(this.broadPhaseResolver(r,o),t.push([r,o]),r.isColliding=!0,o.isColliding=!0):(r.isColliding=!1,o.isColliding=!1)}return t}broadPhaseComparator(i,e){return("characters"===i.group||"characters"===e.group)&&(i.getLeft()<e.getRight()&&e.getLeft()<i.getRight()&&i.getTop()<e.getBottom()&&e.getTop()<i.getBottom())}broadPhaseResolver(i,e){"characters"===i.group&&"collisions"===e.group?this.processNarrowPhase(i,e):"characters"===e.group&&"collisions"===i.group&&this.processNarrowPhase(e,i)}collideFromTop(i,e){return i.getBottom()>e.getTop()&&i.getOldBottom()<=e.getTop()&&(i.setBottom(e.getTop()-.01),i.velocityY=0,i.isJumping=!1,i.isFalling=!1,!0)}collideFromRight(i,e){return i.getLeft()<e.getRight()&&i.getOldLeft()>=e.getRight()&&(i.setLeft(e.x+e.width),i.velocityX=0,!0)}collideFromBottom(i,e){return i.getTop()<e.getBottom()&&i.getOldTop()>=e.getBottom()&&(i.setTop(e.y+e.height),i.velocityY=0,i.isJumping=!1,i.isFalling=!0,!0)}collideFromLeft(i,e){return i.getRight()>e.getLeft()&&i.getOldRight()<=e.getLeft()&&(i.setRight(e.getLeft()-.01),i.velocityX=0,!0)}}}processMap(i){this.rawLayers=i.layers.reduce((i,e)=>{switch(e.type){case"tilelayer":i[e.name]=e.data;break;case"objectgroup":switch(e.name){case"collisions":i[e.name]=e.objects.map(i=>new g(i.x,i.y,i.width,i.height,"collisions",i.type));break;case"characters":i[e.name]=e.objects.map(i=>{switch(i.type){case"player":return x.x=i.x,x.y=i.y,new v(x,w)}})}}return i},{}),this.backgroundMap=[...this.rawLayers.background],this.middleMap=[...this.rawLayers.middle],this.frontMap=[...this.rawLayers.front],this.collisions=[...this.rawLayers.collisions],this.characters=[...this.rawLayers.characters],this.collisionDebugMap=[]}processBoundariesCollision(i){i.x<0&&(i.x=0,i.velocityX=0),i.x+i.width>this.width&&(i.x=this.width-i.width,i.velocityX=0),i.y<0&&(i.y=0,i.velocityY=0),i.y+i.height>this.height&&(i.isJumping=!1,i.y=this.height-i.height,i.velocityY=0)}update(){this.characters.forEach(i=>{i.update(this.gravity),this.processBoundariesCollision(i)});var i=this.collider.processBroadPhase([...this.characters,...this.collisions]);this.collisionDebugMap=i}}(i)}update(){this.world.update()}}(M),[u]=o.world.characters.filter(i=>"player"===i.type),f=new class{constructor(i,e,t){b(this,"render",void 0),b(this,"update",void 0),b(this,"animationFrame",void 0),b(this,"handleRun",void 0),b(this,"timeStep",void 0),b(this,"accumulatedTime",void 0),b(this,"previousTime",void 0),b(this,"isUpdated",void 0),this.update=t,this.render=e,this.animationFrame=()=>{},this.handleRun=()=>{},this.timeStep=i,this.previousTime=0,this.accumulatedTime=0,this.isUpdated=!1}run(i){for(this.accumulatedTime+=i-this.previousTime,this.previousTime=i,this.accumulatedTime>=3*this.timeStep&&(this.accumulatedTime=this.timeStep);this.accumulatedTime>=this.timeStep;)this.accumulatedTime-=this.timeStep,this.update(this.timeStep),this.isUpdated=!0;this.isUpdated&&(this.isUpdated=!1,this.render()),this.animationFrame=window.requestAnimationFrame(this.handleRun)}start(){this.accumulatedTime=this.timeStep,this.previousTime=window.performance.now(),window.requestAnimationFrame(this.handleRun=this.run.bind(this))}stop(){window.cancelAnimationFrame(this.animationFrame)}}(1e3/30,()=>{var i;s.drawMap(o.world.backgroundMap,o.world.columns),s.drawMap(o.world.middleMap,o.world.columns),i=u.isFacingLeft?u.animator.flippedSpriteMap.frames[u.animator.frameValue].frame:u.animator.spriteMap.frames[u.animator.frameValue].frame,s.drawObject(u.isFacingLeft?s.playerSprite.flippedImage:s.playerSprite.image,i.x,i.y,u.x+Math.floor(.5*u.width-.5*i.w),u.y-Math.floor(i.h-u.height),i.w,i.h),s.drawMap(o.world.frontMap,o.world.columns),window.SHOW_COLLISIONS&&s.drawCollisionDebugMap(o.world.collisionDebugMap),s.render(u,o.world.width,o.world.height)},()=>{t.left.isActive?u.startMovingLeft():u.isMovingLeft&&u.stopMovingLeft(),t.right.isActive?u.startMovingRight():u.isMovingRight&&u.stopMovingRight(),t.up.isActive?u.jump(t.up.isActive):u.isJumpTriggered&&u.jump(!1),t.shift.isActive?u.startSprinting():u.isSprinting&&u.stopSprinting(),t.down.isActive?u.startDucking():u.isDucking&&u.stopDucking(),o.update()});s.buffer.canvas.height=o.world.height,s.buffer.canvas.width=o.world.width,window.addEventListener("keydown",i),window.addEventListener("keyup",i),window.addEventListener("resize",e),yield s.mapTileset.loadAsset(k),yield s.playerSprite.loadAsset(z,!0),e(),f.start()})))}]);
//# sourceMappingURL=main.js.map